<ol class="application-list">
	<li class="saved">
		<i class="icon-check number"></i>
		<a class="link" ui-sref="applicant.resume">Application</a>
	</li>
	<li ng-show="$state.includes('applicant');">
		<i class="number">2</i>
		<a class="link" ui-sref="applicant.contract">Read and sign contract</a>
	</li>
	<li ng-show="$state.includes('applicant');">
		<i class="number">3</i>
		<a class="link" ui-sref="applicant.reqs">Requirements</a>
	</li>
	<li ng-show="$state.includes('applicant');">
		<i class="number">4</i>
		<a class="link" ui-sref="applicant.health">Employee Health Evaluation</a>
	</li>
	<li ng-show="$state.includes('applicant');">
		<i class="number">5</i>
		<a class="link" ui-sref="applicant.dda">Direct Deposit</a>
	</li>
	<li ng-show="$state.includes('applicant');">
		<i class="number">6</i>
		<a class="link" ui-sref="applicant.w9">W-9 <small>Request for Taxpayer Identification Number and Certification</small></a>
	</li>
	<li ng-show="$state.includes('applicant');">
		<i class="number">7</i>
		<a class="link" ui-sref="applicant.i9">I-9 <small>Employment Eligibility Verification</small></a>
	</li>
	<li ng-show="$state.includes('applicant');">
		<i class="number">8</i>
		<a class="link" ui-sref="applicant.w4">W-4 <small>Employee&rsquo;s Withholding Allowance Certificate</small></a>
	</li>
	<li ng-show="$state.includes('applicant');">
		<i class="number">9</i>
		<a class="link" ui-sref="applicant.udpa">Utah Individual Clearance for Direct Patient Access</a>
	</li>
</ol>
<div class="btns">
	<a id="withdraw-btn" class="btn" ng-show="$state.includes('applicant');">Withdraw Application</a>
	<a id="reject-btn" class="btn ladda-button warning" data-style="expand-right" ng-show="$state.includes('franchisee.caregivers.applicants.applicant');">Reject</a>
</div>

<script>

	$('#submit-btn').click(function(){
		var l = Ladda.create(this);
		l.start();
		setTimeout(function(){
			l.stop();
			$('.feedback').fadeIn(250);
			$('#withdraw-btn, #submit-btn').addClass('disabled');
		}, 2000)
	})

	$('.upload').click(function(){
		var a = $(this);
		a.next('input[type=file]').click();
	});
	
	$('input[type=file]').change(function(){
		var a = $(this);
		var b = a.closest('li');
		var c = b.find('.upload');
		c.text(a.val())
		var l = Ladda.create(document.querySelector('.upload'));
		l.start();
		setTimeout(function(){
			l.stop();
			c.prepend('<i class="icon-check"></i>');
			b.addClass('done').find('.number').text('').addClass('icon-check');
		}, 2000)
	});

	$('#accept-btn').click(function(){
		var l = Ladda.create(this);
		l.start();
		$('#accept-dialog').dialog({
			resizable: false,
			modal: true,
			width: 280,
			buttons: [
				{
					text: 'Cancel',
					click: function(){
						$(this).dialog('close');
					},
					class: 'prev full-btn'
				},
				{
					text: 'Accept Applicant',
					click: function(event){
						setTimeout(function(){
							l.stop();
							$('#accept-btn').addClass('ng-hide');
							$('#create-btn, .application-list li').removeClass('ng-hide');
						}, 2000)
						$(this).dialog('close');
					},
					class: 'next full-btn primary'
				}
			]
		});
	});

	$('#create-btn').click(function(){
		var l = Ladda.create(this);
		l.start();
		$('#create-dialog').dialog({
			resizable: false,
			modal: true,
			width: 280,
			buttons: [
				{
					text: 'Cancel',
					click: function(){
						$(this).dialog('close');
					},
					class: 'prev full-btn'
				},
				{
					text: 'Create Caregiver',
					click: function(event){
						setTimeout(function(){
							l.stop();
							window.location.replace('/cgw/app/#/franchisee/applicants');
						}, 2000)
						$(this).dialog('close');
					},
					class: 'next full-btn primary'
				}
			]
		});
	});
	
	$('#reject-btn').click(function(){
		var l = Ladda.create(this);
		l.start();
		$('#reject-dialog').dialog({
			resizable: false,
			modal: true,
			width: 280,
			buttons: [
				{
					text: 'Cancel',
					click: function(){
						$(this).dialog('close');
					},
					class: 'prev full-btn'
				},
				{
					text: 'Reject Applicant',
					click: function(event){
						setTimeout(function(){
							l.stop();
							$('#reject-btn').addClass('disabled');
							window.location.replace('/cgw/app/#/franchisee/applicants');
						}, 2000)
						$(this).dialog('close');
					},
					class: 'next warning full-btn'
				}
			]
		});
	});

</script>