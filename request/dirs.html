<div class="ui-section">
	<form class="paper-form" ng-controller="form">
		<fieldset class="table options-vertical editable" ng-show="$state.includes('super');">
			<legend>State Visibility</legend>
			<input type="checkbox" />
			<label class="option" >Utah</label>
			<input type="checkbox" />
			<label class="option" >Nevada</label>
		</fieldset>
		<h2 class="title">Acknowledgment of Patient Information on Advanced Directives</h2>
		<fieldset class="table">
			<dl>
				<dt><label for="">First Name <small class="reqd">Required</small></label></dt>
				<dd><input type="text" /></dd>
			</dl>
			<dl>
				<dt><label for="">Last Name</label></dt>
				<dd><input type="text" /></dd>
			</dl>
			<dl>
				<dt><label for="">Address</label></dt>
				<dd><input type="text" /></dd>
			</dl>
			<dl>
				<dt><label for="">City</label></dt>
				<dd><input type="text" /></dd>
			</dl>
			<dl>
				<dt><label for="">State</label></dt>
				<dd>
					<select>
						<option></option>
						<option>Utah</option>
						<option>All States</option>
					</select>
				</dd>
			</dl>
			<dl>
				<dt><label for="">Zip Code</label></dt>
				<dd><input type="tel" /></dd>
			</dl>
			<dl>
				<dt><label for="">Social Security Number</label></dt>
				<dd><input type="tel" /></dd>
			</dl>
			<dl>
				<dt><label for="">Date of Birth</label></dt>
				<dd><input type="date" class="datepicker" jq-datepicker /></dd>
			</dl>
		</fieldset>
		<fieldset>
			<legend>Acknowledgements</legend>
			<ol class="n-list">
				<li class="options-vertical">
					<input type="checkbox" />
					<label class="option" for="">I have received written information on state law, and the hospital&rsquo;s written policy, advising me of my right to make decisions concerning my medical care, including the right to accept or refuse medical or surgical treatment, and formulate advance directives (declaration and/or durable power of attorney for health care decisions).</label>
				</li>
				<li class="options-vertical">
					<p>I have formulated an advance directive:</p>
					<input type="checkbox" />
					<label class="option" for="">Declaration</label>
					<input type="checkbox" />
					<label class="option" for="">Durable Power of Attorney for Health Care Decisions</label>
					<p class="indent">If yes, I have provided a copy of my advance directive to the hospital (if I haven&rsquo;t, I will provide a copy to the hospital as soon as possible)</p>
					<input type="checkbox" />
					<label class="option" for="">Copy is provided</label>
				</li>
			</ol>
		</fieldset>
		<fieldset>
			<legend>Comments</legend>
			<dl>
				<dt><label for="">Comments: (hospital follow up efforts if the patient cannot receive the advance directives information upon admission or does not bring in a copy of the advance directive if he/she states he/she has one)</label></dt>
				<dd><textarea class="fill-width"></textarea></dd>
			</dl>
			<dl>
				<dt><label for="">Although the patient is instructed to bring in a copy of his/her advance directive to be placed in the medical record, the substance/instructions of patient&rsquo;s advance directive states:</label></dt>
				<dd><textarea class="fill-width"></textarea></dd>
			</dl>
		</fieldset>
		<p>I understand I will not be discriminated against on my provision of care whether or not I have an advance directive.</p>
		<fieldset class="m-signature-pad initials">
			<dl>
				<dt class="ui-toolbar">
					<label for="" class="left">Patient Signature</label>
					<button class="button clear right" data-action="clear">Clear</button>
				</dt>
				<dd class="m-signature-pad--body">
					<canvas></canvas>
				</dd>
			</dl>
		</fieldset>
		<fieldset class="table">
			<dl>
				<dt><label for="">Date</label></dt>
				<dd><input type="date" class="datepicker" jq-datepicker /></dd>
			</dl>
		</fieldset>
		<fieldset class="m-signature-pad initials">
			<dl>
				<dt class="ui-toolbar">
					<label for="" class="left">Family or Other (if patient is unable to sign)</label>
					<button class="button clear right" data-action="clear">Clear</button>
				</dt>
				<dd class="m-signature-pad--body">
					<canvas></canvas>
				</dd>
			</dl>
		</fieldset>
		<fieldset class="table">
			<dl>
				<dt><label for="">Date</label></dt>
				<dd><input type="date" class="datepicker" jq-datepicker /></dd>
			</dl>
		</fieldset>
		<fieldset class="m-signature-pad initials">
			<dl>
				<dt class="ui-toolbar">
					<label for="" class="left">Hospital Representative</label>
					<button class="button clear right" data-action="clear">Clear</button>
				</dt>
				<dd class="m-signature-pad--body">
					<canvas></canvas>
				</dd>
			</dl>
		</fieldset>
		<fieldset class="table">
			<dl>
				<dt><label for="">Date</label></dt>
				<dd><input type="date" class="datepicker" jq-datepicker /></dd>
			</dl>
		</fieldset>
	</form>
</div>

<script src="js/signature_pad.js"></script>

<script>

	$('.m-signature-pad').each(function(){
		var wrapper = this,
		    clearButton = wrapper.querySelector("[data-action=clear]"),
		    canvas = wrapper.querySelector("canvas"),
		    signaturePad;
		
		// Adjust canvas coordinate space taking into account pixel ratio,
		// to make it look crisp on mobile devices.
		// This also causes canvas to be cleared.
		function resizeCanvas() {
		    var ratio =  window.devicePixelRatio || 1;
		    canvas.width = canvas.offsetWidth * ratio;
		    canvas.height = canvas.offsetHeight * ratio;
		    canvas.getContext("2d").scale(ratio, ratio);
		}
		
		window.onresize = resizeCanvas;
		resizeCanvas();
		
		signaturePad = new SignaturePad(canvas);
		
		clearButton.addEventListener("click", function (event) {
		    signaturePad.clear();
		});
	});
	
</script>